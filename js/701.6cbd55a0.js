"use strict";(self["webpackChunkimage_online_tools"]=self["webpackChunkimage_online_tools"]||[]).push([[701],{5204:function(t,e,o){o.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"5px"}},[e("div",{staticClass:"optionsGroupTitle",on:{click:function(e){return t.toggleFormSection("generateAndDownloadVideo")}}},[e("b",[t._v(t._s(t.sectionTitle))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showFormSections.generateAndDownloadVideo,expression:"showFormSections.generateAndDownloadVideo"}]},[e("div",[e("div",[t._v("Framerate: "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.videoOptions.framerate,expression:"videoOptions.framerate"}],staticClass:"input_option_small",attrs:{type:"text"},domProps:{value:t.videoOptions.framerate},on:{input:function(e){e.target.composing||t.$set(t.videoOptions,"framerate",e.target.value)}}}),t._v(" frames per second")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.videoOptions.autoStop,expression:"videoOptions.autoStop"}],attrs:{type:"checkbox",id:"checkbox_autoStop"},domProps:{checked:Array.isArray(t.videoOptions.autoStop)?t._i(t.videoOptions.autoStop,null)>-1:t.videoOptions.autoStop},on:{change:function(e){var o=t.videoOptions.autoStop,i=e.target,n=!!i.checked;if(Array.isArray(o)){var a=null,r=t._i(o,a);i.checked?r<0&&t.$set(t.videoOptions,"autoStop",o.concat([a])):r>-1&&t.$set(t.videoOptions,"autoStop",o.slice(0,r).concat(o.slice(r+1)))}else t.$set(t.videoOptions,"autoStop",n)}}}),e("label",{attrs:{for:"checkbox_autoStop"}},[t._v("Automatically stop after...")]),1==t.videoOptions.autoStop?e("input",{directives:[{name:"model",rawName:"v-model",value:t.videoOptions.durationLimit,expression:"videoOptions.durationLimit"}],staticClass:"input_option_small",attrs:{type:"text"},domProps:{value:t.videoOptions.durationLimit},on:{input:function(e){e.target.composing||t.$set(t.videoOptions,"durationLimit",e.target.value)}}}):t._e(),1==t.videoOptions.autoStop?e("select",{directives:[{name:"model",rawName:"v-model",value:t.videoOptions.autoStopType,expression:"videoOptions.autoStopType"}],on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.videoOptions,"autoStopType",e.target.multiple?o:o[0])}}},[e("option",{attrs:{value:"seconds"}},[t._v("seconds")]),e("option",{attrs:{value:"frames"}},[t._v("frames")])]):t._e()])]),e("div",[t.videoProgress?.capturing?t._e():e("div",{staticClass:"div_option"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.downloadVideo()}}},[t._v("Generate video...")])]),e("div",{staticClass:"div_option"}),t.videoProgress?.capturing?e("div",{staticClass:"div_option"},[e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.stopAndDownloadVideo()}}},[e("IconStop",{attrs:{size:24}}),t._v(" Stop recording and download video...")],1)]):t._e(),e("div",{staticClass:"div_option"}),t.videoProgress?.capturing||t.videoProgress?.downloadReady?e("div",[1==t.videoOptions.autoStop?e("div",[t._v(" Progress: "+t._s(t.videoProgress?.progressPercentage)+" ")]):t._e(),e("div",[t._v(" Current frame: "+t._s(t.videoProgress?.currentFrame)+" ")]),e("div",[t._v(" Current duration: "+t._s(t.videoProgress?.currentDuration)+" seconds ")])]):t._e(),t.videoProgress?.downloadReady?e("div",{staticStyle:{"font-weight":"bold",color:"green"}},[t._v("Video is ready to download!")]):t._e(),t.videoProgress?.downloadReady?e("div",{staticClass:"div_option"},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.saveAndDownloadVideo()}}},[e("IconDownload",{attrs:{size:24}}),t._v(" Download video")],1)]):t._e()])])])},n=[],a=o(8278),r=o(7e3),s=o(7345),d={name:"VideoDownloadSection",components:{IconDownload:r.Z,IconStop:s.Z},props:{startAnimation:{type:Function,default:function(){}},drawImage:{type:Function,default:function(){}},canvasId:{type:String,default:"resultCanvas"},filenamePrefix:{type:String,default:"animation-"},show:{type:Boolean,default:!0},canToggle:{type:Boolean,default:!1},sectionTitle:{type:String,default:"Generate and download video:"}},data(){return{videoCapture:null,videoOptions:{autoStop:!1,autoStopType:"seconds",durationLimit:0,framerate:30},videoProgress:null,showFormSections:{generateAndDownloadVideo:!0}}},mounted(){this.showFormSections.generateAndDownloadVideo=this.show,this.videoCapture=(0,a.Z)(),this.videoCapture.loadVideoCaptureScript()},computed:{},methods:{toggleFormSection(t){this.canToggle&&(this.showFormSections[t]=!this.showFormSections[t])},downloadVideo(){let t=document.getElementById(this.canvasId),e=Number(this.videoOptions.framerate),o=0,i=0;1==this.videoOptions.autoStop&&("seconds"==this.videoOptions.autoStopType&&(o=Number(this.videoOptions.durationLimit)),"frames"==this.videoOptions.autoStopType&&(i=Number(this.videoOptions.durationLimit)));let n=(new Date).toISOString().substring(0,19).replaceAll("-","").replaceAll(":","").replaceAll("T","_"),a={name:this.filenamePrefix+n,format:"webm",framerate:e,timeLimit:o,frameLimit:i,quality:99};this.startAnimation(),this.videoCapture.downloadVideo(this.drawImage,this.updateVideoProgress,t,a)},updateVideoProgress(t){this.videoProgress=t},stopAndDownloadVideo(){this.videoCapture.stop(),this.videoCapture.save()},saveAndDownloadVideo(){this.videoCapture.save()}}},l=d,u=o(1001),p=(0,u.Z)(l,i,n,!1,null,"607ac32e",null),c=p.exports},3177:function(t,e,o){o.d(e,{Z:function(){return l}});var i=function(){var t=this,e=t._self._c;return e("svg",{staticStyle:{"margin-top":"-4px"},attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#e3e3e3"}},[e("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}})])},n=[],a={name:"IconPause",props:{color:{type:String,default:"#ffffff"}}},r=a,s=o(1001),d=(0,s.Z)(r,i,n,!1,null,"533d1449",null),l=d.exports},6570:function(t,e,o){o.d(e,{Z:function(){return l}});var i=function(){var t=this,e=t._self._c;return e("svg",{staticStyle:{"margin-top":"-4px"},attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#e3e3e3"}},[e("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M8 5v14l11-7z"}})])},n=[],a={name:"IconPlay",props:{color:{type:String,default:"#ffffff"}}},r=a,s=o(1001),d=(0,s.Z)(r,i,n,!1,null,"abb5a11a",null),l=d.exports},3958:function(t,e,o){o.d(e,{Z:function(){return l}});var i=function(){var t=this,e=t._self._c;return e("svg",{staticStyle:{"margin-top":"-4px"},attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#e3e3e3"}},[e("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}})])},n=[],a={name:"IconRestart",props:{color:{type:String,default:"#ffffff"}}},r=a,s=o(1001),d=(0,s.Z)(r,i,n,!1,null,"531c0284",null),l=d.exports},7345:function(t,e,o){o.d(e,{Z:function(){return l}});var i=function(){var t=this,e=t._self._c;return e("svg",{staticStyle:{"margin-top":"-4px"},attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#e3e3e3"}},[e("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M6 6h12v12H6z"}})])},n=[],a={name:"IconStop",props:{color:{type:String,default:"#ffffff"}}},r=a,s=o(1001),d=(0,s.Z)(r,i,n,!1,null,"203ee65e",null),l=d.exports},8278:function(t,e){const o=()=>{let t=!1,e=!1,o=null,i=null,n=null,a=null,r=null,s=null,d=null,l=null;function u(){let t="ccapture",e="/lib/ccapture/CCapture.all.min.js";return c(t),p(e,t)}function p(t,e){return new Promise(((o,i)=>{let n=document.createElement("script");n.onload=function(){o()},n.onerror=function(){i()},n.setAttribute("src",t),n.setAttribute("id",e),document.head.appendChild(n)}))}function c(t){const e=document.querySelector('script[id="'+t+'"]');null!=e&&document.head.removeChild(e)}function v(u,p,c,v){v=v||{};let h=v.framerate??30,g=v.frameLimit??0,w=v.timeLimit??0,S=new window.CCapture({name:v.name,format:v.format??"webm",quality:v.quality??99,display:v.display??!1,motionBlurFrames:v.motionBlurFrames??0,workersPath:v.workersPath??"../../src/",framerate:h,timeLimit:w,frameLimit:g,autoSaveTime:v.autoSaveTime??0});S.start(),o=u,i=p,n=c,a=S,r=0,s=m(g,w,h),d=0,l=1e3/h,t=!0,e=!1,f()}function m(t,e,o){return 0!=t?t:0!=e?o*e:null}function f(){let u=null!=s&&r>=s;0==u&&1==t?(requestAnimationFrame(f),o(),a.capture(n),d+=l,r++,i(h())):(t=!1,e=!0,i(h()))}function h(){let o=null!=s?(100*r/s).toFixed(2)+"%":null,i=(d/1e3).toFixed(2);return{capturing:t,downloadReady:e,currentFrame:r,currentDuration:i,progressPercentage:o}}function g(){a.stop(),t=!1,e=!0,i(h())}function w(){a.save()}return{loadVideoCaptureScript:u,downloadVideo:v,stop:g,save:w,getProgress:h}};e["Z"]=o}}]);